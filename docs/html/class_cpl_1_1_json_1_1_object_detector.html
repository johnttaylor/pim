<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Patterns in the Machine: Cpl::Json::ObjectDetector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo2.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Patterns in the Machine<span id="projectnumber">&#160;$$$PROJECT_NUMBER$$$</span>
   </div>
   <div id="projectbrief">Embedded C++ Class Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_cpl.html">Cpl</a></li><li class="navelem"><a class="el" href="namespace_cpl_1_1_json.html">Json</a></li><li class="navelem"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html">ObjectDetector</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="class_cpl_1_1_json_1_1_object_detector-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle"><div class="title">Cpl::Json::ObjectDetector Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This helper class is used to determine when an entire <a class="el" href="namespace_cpl_1_1_json.html" title="The &#39;Json&#39; namespace is a collection of classes, modules, etc.">Json</a> object has been read from an input source.  
 <a href="class_cpl_1_1_json_1_1_object_detector.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This helper class is used to determine when an entire <a class="el" href="namespace_cpl_1_1_json.html" title="The &#39;Json&#39; namespace is a collection of classes, modules, etc.">Json</a> object has been read from an input source. </p>
<p >This class does not read or store the incoming data - it simply inspect the provide data (one byte at time) and declares a JSON object when it see as match trailing '}' for the leading '{'</p>
<p >Usage: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_cpl_1_1_io_1_1_file_1_1_input.html">Cpl::Io::File::Input</a> fd(<span class="stringliteral">&quot;bob.txt&quot;</span>);</div>
<div class="line">ObjectDetector       detector;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>( fd.eof() == <span class="keyword">false</span> )</div>
<div class="line">{</div>
<div class="line">    uint8_t buffer[256];</div>
<div class="line">    <span class="keywordtype">int</span>     bytesRead;</div>
<div class="line">    <span class="keywordflow">if</span> ( fd.read( buffer, <span class="keyword">sizeof</span>(buffer), bytesRead ) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">size_t</span> startPosition;</div>
<div class="line">        <span class="keywordtype">size_t</span> endPosition;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ( detector.scan( buffer, bytesRead, startPosition, endPosition ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// JSON object found.  </span></div>
<div class="line">            <span class="comment">// The initial &#39;{&#39; is at  &#39;startPosition&#39;</span></div>
<div class="line">            <span class="comment">// The final/closing &#39;}&#39; is at &#39;endPosition&#39;</span></div>
<div class="line">            <span class="comment">// DO Something...</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_cpl_1_1_io_1_1_file_1_1_input_html"><div class="ttname"><a href="class_cpl_1_1_io_1_1_file_1_1_input.html">Cpl::Io::File::Input</a></div><div class="ttdoc">This concrete class provides a platform independent 'standard' implementation of a Cpl::Io::File::Inp...</div><div class="ttdef"><b>Definition:</b> Input.h:36</div></div>
</div><!-- fragment --> </div>
<p><code>#include &lt;<a class="el" href="_object_detector_8h_source.html">ObjectDetector.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a51863c71af9bcb6906996bd5a555be6f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a51863c71af9bcb6906996bd5a555be6f">scan</a> (const void *inputStream, size_t numBytesToScan, size_t &amp;startOffset, size_t &amp;endOffset)</td></tr>
<tr class="memdesc:a51863c71af9bcb6906996bd5a555be6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inspect 'numBytes' and returns true if a complete JSON object was found.  <a href="class_cpl_1_1_json_1_1_object_detector.html#a51863c71af9bcb6906996bd5a555be6f">More...</a><br /></td></tr>
<tr class="separator:a51863c71af9bcb6906996bd5a555be6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada716d5b951df66cc3f0c4f3aca9473b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#ada716d5b951df66cc3f0c4f3aca9473b">reset</a> ()</td></tr>
<tr class="memdesc:ada716d5b951df66cc3f0c4f3aca9473b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the detector to being looking for a new JSON object.  <a href="class_cpl_1_1_json_1_1_object_detector.html#ada716d5b951df66cc3f0c4f3aca9473b">More...</a><br /></td></tr>
<tr class="separator:ada716d5b951df66cc3f0c4f3aca9473b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-types" name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a86151060172fcd27a66b1b608955c1e2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a86151060172fcd27a66b1b608955c1e2">State_T</a> { <br />
&#160;&#160;<b>eNOT_STARTED</b>
, <b>ePLAIN</b>
, <b>eQUOTED</b>
, <b>eESCAPED</b>
, <br />
&#160;&#160;<b>eFOUND</b>
<br />
 }</td></tr>
<tr class="memdesc:a86151060172fcd27a66b1b608955c1e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detector state.  <a href="class_cpl_1_1_json_1_1_object_detector.html#a86151060172fcd27a66b1b608955c1e2">More...</a><br /></td></tr>
<tr class="separator:a86151060172fcd27a66b1b608955c1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8e60af3495dedced7ea22e75b9902848"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a8e60af3495dedced7ea22e75b9902848">m_offset</a></td></tr>
<tr class="memdesc:a8e60af3495dedced7ea22e75b9902848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current offset.  <a href="class_cpl_1_1_json_1_1_object_detector.html#a8e60af3495dedced7ea22e75b9902848">More...</a><br /></td></tr>
<tr class="separator:a8e60af3495dedced7ea22e75b9902848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad530550a1e178a91c1b3bdb31684a551"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#ad530550a1e178a91c1b3bdb31684a551">m_startOffset</a></td></tr>
<tr class="memdesc:ad530550a1e178a91c1b3bdb31684a551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offset of the initial '{'.  <a href="class_cpl_1_1_json_1_1_object_detector.html#ad530550a1e178a91c1b3bdb31684a551">More...</a><br /></td></tr>
<tr class="separator:ad530550a1e178a91c1b3bdb31684a551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ffe314e9ffb0432758c6b78a8e47f0c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a0ffe314e9ffb0432758c6b78a8e47f0c">m_braceCount</a></td></tr>
<tr class="memdesc:a0ffe314e9ffb0432758c6b78a8e47f0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of '{' encountered.  <a href="class_cpl_1_1_json_1_1_object_detector.html#a0ffe314e9ffb0432758c6b78a8e47f0c">More...</a><br /></td></tr>
<tr class="separator:a0ffe314e9ffb0432758c6b78a8e47f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19949ca966aed1109e6dca06eccdd5ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a86151060172fcd27a66b1b608955c1e2">State_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a19949ca966aed1109e6dca06eccdd5ab">m_state</a></td></tr>
<tr class="memdesc:a19949ca966aed1109e6dca06eccdd5ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quoted key/value state.  <a href="class_cpl_1_1_json_1_1_object_detector.html#a19949ca966aed1109e6dca06eccdd5ab">More...</a><br /></td></tr>
<tr class="separator:a19949ca966aed1109e6dca06eccdd5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a86151060172fcd27a66b1b608955c1e2" name="a86151060172fcd27a66b1b608955c1e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86151060172fcd27a66b1b608955c1e2">&#9670;&nbsp;</a></span>State_T</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a86151060172fcd27a66b1b608955c1e2">Cpl::Json::ObjectDetector::State_T</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detector state. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ada716d5b951df66cc3f0c4f3aca9473b" name="ada716d5b951df66cc3f0c4f3aca9473b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada716d5b951df66cc3f0c4f3aca9473b">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cpl::Json::ObjectDetector::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the detector to being looking for a new JSON object. </p>

</div>
</div>
<a id="a51863c71af9bcb6906996bd5a555be6f" name="a51863c71af9bcb6906996bd5a555be6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51863c71af9bcb6906996bd5a555be6f">&#9670;&nbsp;</a></span>scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Cpl::Json::ObjectDetector::scan </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>inputStream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numBytesToScan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>startOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>endOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inspect 'numBytes' and returns true if a complete JSON object was found. </p>
<p >The pointers 'startOffset' and 'endOffset' return the byte offset to the start and end of the found JSON object. The offset is based on the number of number consumed since the object was created or <a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#ada716d5b951df66cc3f0c4f3aca9473b" title="Resets the detector to being looking for a new JSON object.">reset()</a> was called.</p>
<p >NOTE: The class does NOT VALIDATE the JSON syntax. It ONLY finds starting and trailing curly braces. It assumes the JSON syntax and quoted character escaping semantics when searching for the trailing curly brace.</p>
<p >The method will ALWAYS return true if called after detecting a JSON object and set 'startOffset' and 'endOffset' to zero. Use the <a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#ada716d5b951df66cc3f0c4f3aca9473b" title="Resets the detector to being looking for a new JSON object.">reset()</a> method to restart/reuse the detector instance. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0ffe314e9ffb0432758c6b78a8e47f0c" name="a0ffe314e9ffb0432758c6b78a8e47f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffe314e9ffb0432758c6b78a8e47f0c">&#9670;&nbsp;</a></span>m_braceCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cpl::Json::ObjectDetector::m_braceCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of '{' encountered. </p>

</div>
</div>
<a id="a8e60af3495dedced7ea22e75b9902848" name="a8e60af3495dedced7ea22e75b9902848"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e60af3495dedced7ea22e75b9902848">&#9670;&nbsp;</a></span>m_offset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cpl::Json::ObjectDetector::m_offset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current offset. </p>

</div>
</div>
<a id="ad530550a1e178a91c1b3bdb31684a551" name="ad530550a1e178a91c1b3bdb31684a551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad530550a1e178a91c1b3bdb31684a551">&#9670;&nbsp;</a></span>m_startOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cpl::Json::ObjectDetector::m_startOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Offset of the initial '{'. </p>

</div>
</div>
<a id="a19949ca966aed1109e6dca06eccdd5ab" name="a19949ca966aed1109e6dca06eccdd5ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19949ca966aed1109e6dca06eccdd5ab">&#9670;&nbsp;</a></span>m_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cpl_1_1_json_1_1_object_detector.html#a86151060172fcd27a66b1b608955c1e2">State_T</a> Cpl::Json::ObjectDetector::m_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Quoted key/value state. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Cpl/Json/<a class="el" href="_object_detector_8h_source.html">ObjectDetector.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 25 2022 14:37:56 for Patterns in the Machine by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
