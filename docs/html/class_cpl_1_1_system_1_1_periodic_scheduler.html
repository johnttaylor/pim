<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Patterns in the Machine: Cpl::System::PeriodicScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.gif"/></td>
  <td id="projectalign">
   <div id="projectname">Patterns in the Machine<span id="projectnumber">&#160;$$$PROJECT_NUMBER$$$</span>
   </div>
   <div id="projectbrief">Embedded C++ Class Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Components</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Components&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_cpl.html">Cpl</a></li><li class="navelem"><a class="el" href="namespace_cpl_1_1_system.html">System</a></li><li class="navelem"><a class="el" href="class_cpl_1_1_system_1_1_periodic_scheduler.html">PeriodicScheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="class_cpl_1_1_system_1_1_periodic_scheduler-members.html">List of all members</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle"><div class="title">Cpl::System::PeriodicScheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This concrete class is a 'policy' object that is used to add polled based, cooperative monotonic scheduling to a <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> object.  
 <a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This concrete class is a 'policy' object that is used to add polled based, cooperative monotonic scheduling to a <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> object. </p>
<p>Monotonic in this content means that if a 'interval' method is scheduled to execute at a periodic rate of 200Hz, then the method will be called on every 5ms boundary of the system time.</p>
<p>The scheduler makes its best attempt at being monotonic and deterministic, BUT because the scheduling is polled and cooperative (i.e. its is the application's responsibility to not-overrun/over-allocate the processing done during each interval) the actual the timing cannot be guaranteed. That said, the scheduler will detect and report when the interval timing slips.</p>
<p>The usage of this class is to implement (or extended) a <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Cpl::System::Runnable</a> object, i.e. invoked inside the 'forever' loop of the <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> object's appRun() method. The scheduler can be use within a 'bare' forever loop and it can be used with existing event based <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> objects to add periodic scheduling. See <a class="el" href="class_cpl_1_1_dm_1_1_periodic_scheduler.html" title="This class extends the Cpl::Dm::MailboxServer class to add periodic scheduling to an event based &#39;thr...">Cpl::Dm::PeriodicScheduler</a> for example extending an event based <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> object to include periodic scheduling. </p>
</div>
<p><code>#include &lt;<a class="el" href="_system_2_periodic_scheduler_8h_source.html">PeriodicScheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Cpl::System::PeriodicScheduler:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_cpl_1_1_system_1_1_periodic_scheduler__inherit__graph.svg" width="392" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Cpl::System::PeriodicScheduler:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_cpl_1_1_system_1_1_periodic_scheduler__coll__graph.svg" width="430" height="304"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines an interval.  <a href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a06aab5c8d5f100269ade9e1d9dad9a6b" id="r_a06aab5c8d5f100269ade9e1d9dad9a6b"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06aab5c8d5f100269ade9e1d9dad9a6b">IntervalCallbackFunc_T</a>) (<a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentInterval, void *context)</td></tr>
<tr class="memdesc:a06aab5c8d5f100269ade9e1d9dad9a6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition for an interval method.  <br /></td></tr>
<tr class="separator:a06aab5c8d5f100269ade9e1d9dad9a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b68b1144a2234bfd8b0bc1b0159671" id="r_a65b68b1144a2234bfd8b0bc1b0159671"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a65b68b1144a2234bfd8b0bc1b0159671">ReportSlippageFunc_T</a>) (<a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> &amp;intervalThatSlipped, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> missedInterval)</td></tr>
<tr class="memdesc:a65b68b1144a2234bfd8b0bc1b0159671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the method that is used to report to the Application when an Interval does not execute 'on time'.  <br /></td></tr>
<tr class="separator:a65b68b1144a2234bfd8b0bc1b0159671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412dc9cfb5083bd699d3b300c4597a87" id="r_a412dc9cfb5083bd699d3b300c4597a87"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a412dc9cfb5083bd699d3b300c4597a87">NowFunc_T</a>) ()</td></tr>
<tr class="memdesc:a412dc9cfb5083bd699d3b300c4597a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the function that returns current system.  <br /></td></tr>
<tr class="separator:a412dc9cfb5083bd699d3b300c4597a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7716e93ce04eeba0093290e14165c76a" id="r_a7716e93ce04eeba0093290e14165c76a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a>) (<a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick)</td></tr>
<tr class="memdesc:a7716e93ce04eeba0093290e14165c76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the optional functions that are used to provide hooks during startup/shutdown of the thread/loop[ to perform application specific processing.  <br /></td></tr>
<tr class="separator:a7716e93ce04eeba0093290e14165c76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2716338691bc9e0a9df667add7dbecd3" id="r_a2716338691bc9e0a9df667add7dbecd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2716338691bc9e0a9df667add7dbecd3">PeriodicScheduler</a> (<a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> intervals[], <a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a> beginThreadProcessing=nullptr, <a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a> endThreadProcessing=nullptr, <a class="el" href="#a65b68b1144a2234bfd8b0bc1b0159671">ReportSlippageFunc_T</a> slippageFunc=nullptr, <a class="el" href="#a412dc9cfb5083bd699d3b300c4597a87">NowFunc_T</a> nowFunc=<a class="el" href="class_cpl_1_1_system_1_1_elapsed_time.html#aae92d5e018c980d170c3a34e261e88ac">ElapsedTime::precision</a>)</td></tr>
<tr class="memdesc:a2716338691bc9e0a9df667add7dbecd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a2716338691bc9e0a9df667add7dbecd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34c482b4f3bcde8332639a33066e96e" id="r_ad34c482b4f3bcde8332639a33066e96e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad34c482b4f3bcde8332639a33066e96e">~PeriodicScheduler</a> ()</td></tr>
<tr class="memdesc:ad34c482b4f3bcde8332639a33066e96e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor.  <br /></td></tr>
<tr class="separator:ad34c482b4f3bcde8332639a33066e96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff10bb979868b13f6ac1875a309719c" id="r_acff10bb979868b13f6ac1875a309719c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acff10bb979868b13f6ac1875a309719c">executeScheduler</a> ()</td></tr>
<tr class="memdesc:acff10bb979868b13f6ac1875a309719c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to invoke the scheduler.  <br /></td></tr>
<tr class="separator:acff10bb979868b13f6ac1875a309719c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44ae872eb166a3ae3f167eb410e65f4" id="r_ac44ae872eb166a3ae3f167eb410e65f4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac44ae872eb166a3ae3f167eb410e65f4">beginLoop</a> ()</td></tr>
<tr class="memdesc:ac44ae872eb166a3ae3f167eb410e65f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is expected to be called ONCE when the 'thread' is started and prior to the thread entering its 'forever' loop.  <br /></td></tr>
<tr class="separator:ac44ae872eb166a3ae3f167eb410e65f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e7045822721b64968a80abea9d6f6ba" id="r_a7e7045822721b64968a80abea9d6f6ba"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7e7045822721b64968a80abea9d6f6ba">endLoop</a> ()</td></tr>
<tr class="memdesc:a7e7045822721b64968a80abea9d6f6ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is expected to be called ONCE when the 'thread' has exited its 'forever' loop (but before the thread has actually terminated)  <br /></td></tr>
<tr class="separator:a7e7045822721b64968a80abea9d6f6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5eb7f1cbe2dcac2de27e20e4b9265d78" id="r_a5eb7f1cbe2dcac2de27e20e4b9265d78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5eb7f1cbe2dcac2de27e20e4b9265d78">setTimeMarker</a> (<a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> &amp;interval, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick) noexcept</td></tr>
<tr class="memdesc:a5eb7f1cbe2dcac2de27e20e4b9265d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to Round DOWN to the nearest 'interval' boundary.  <br /></td></tr>
<tr class="separator:a5eb7f1cbe2dcac2de27e20e4b9265d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6c0362abf820011bb43143303f11fa63" id="r_a6c0362abf820011bb43143303f11fa63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c0362abf820011bb43143303f11fa63">m_intervals</a></td></tr>
<tr class="memdesc:a6c0362abf820011bb43143303f11fa63"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of Intervals Pointers.  <br /></td></tr>
<tr class="separator:a6c0362abf820011bb43143303f11fa63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a23b70a23c9d3f5d5c1accb5e633848" id="r_a3a23b70a23c9d3f5d5c1accb5e633848"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a65b68b1144a2234bfd8b0bc1b0159671">ReportSlippageFunc_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a23b70a23c9d3f5d5c1accb5e633848">m_reportSlippage</a></td></tr>
<tr class="memdesc:a3a23b70a23c9d3f5d5c1accb5e633848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report slippage method.  <br /></td></tr>
<tr class="separator:a3a23b70a23c9d3f5d5c1accb5e633848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f5f6f912a64614cb21a442098f32a1" id="r_ae2f5f6f912a64614cb21a442098f32a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a412dc9cfb5083bd699d3b300c4597a87">NowFunc_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2f5f6f912a64614cb21a442098f32a1">m_nowFunc</a></td></tr>
<tr class="memdesc:ae2f5f6f912a64614cb21a442098f32a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current system callback.  <br /></td></tr>
<tr class="separator:ae2f5f6f912a64614cb21a442098f32a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb3ed5eb956ea94ce77e8a97f85cc8e6" id="r_adb3ed5eb956ea94ce77e8a97f85cc8e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb3ed5eb956ea94ce77e8a97f85cc8e6">m_beginThreadFunc</a></td></tr>
<tr class="memdesc:adb3ed5eb956ea94ce77e8a97f85cc8e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application hook during thread start-up.  <br /></td></tr>
<tr class="separator:adb3ed5eb956ea94ce77e8a97f85cc8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48405b1375c3b4d78a839b0149791e64" id="r_a48405b1375c3b4d78a839b0149791e64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48405b1375c3b4d78a839b0149791e64">m_endThreadFunc</a></td></tr>
<tr class="memdesc:a48405b1375c3b4d78a839b0149791e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application hook during thread shutdown.  <br /></td></tr>
<tr class="separator:a48405b1375c3b4d78a839b0149791e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcbe85069d8ca86ee96fe6a16d0523d6" id="r_afcbe85069d8ca86ee96fe6a16d0523d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afcbe85069d8ca86ee96fe6a16d0523d6">m_firstExecution</a></td></tr>
<tr class="memdesc:afcbe85069d8ca86ee96fe6a16d0523d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to managing the 'first' execution.  <br /></td></tr>
<tr class="separator:afcbe85069d8ca86ee96fe6a16d0523d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a7716e93ce04eeba0093290e14165c76a" name="a7716e93ce04eeba0093290e14165c76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7716e93ce04eeba0093290e14165c76a">&#9670;&#160;</a></span>Hook_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* Cpl::System::PeriodicScheduler::Hook_T) (<a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the optional functions that are used to provide hooks during startup/shutdown of the thread/loop[ to perform application specific processing. </p>

</div>
</div>
<a id="a06aab5c8d5f100269ade9e1d9dad9a6b" name="a06aab5c8d5f100269ade9e1d9dad9a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06aab5c8d5f100269ade9e1d9dad9a6b">&#9670;&#160;</a></span>IntervalCallbackFunc_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* Cpl::System::PeriodicScheduler::IntervalCallbackFunc_T) (<a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentInterval, void *context)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition for an interval method. </p>
<p>This method is called when the period time has expired for the interval.</p>
<p>Where: currentTick - is current system when the interval method is called currentInterval - is the deterministic interval boundary that is being logically executed. context - Application defined argument/value passed to the interval method.</p>
<p>Example: Given a interval method is scheduled to execute at 10Hz and the current system time in the <a class="el" href="class_cpl_1_1_system_1_1_runnable.html" title="This is an abstract class defines the interface for an object that is &quot;executed&quot; when a Thread object...">Runnable</a> object's forever loop is 10.212 seconds when the interval method is called THEN: </p><pre class="fragment">currentTick:=      10212 ms
currentInterval:=  10200 ms
</pre> 
</div>
</div>
<a id="a412dc9cfb5083bd699d3b300c4597a87" name="a412dc9cfb5083bd699d3b300c4597a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412dc9cfb5083bd699d3b300c4597a87">&#9670;&#160;</a></span>NowFunc_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a>(* Cpl::System::PeriodicScheduler::NowFunc_T) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the function that returns current system. </p>
<p>This method has two purposes: 1) It simplifies unit testing because it breaks the dependency on 'real time 2) Makes unit testing easier </p>

</div>
</div>
<a id="a65b68b1144a2234bfd8b0bc1b0159671" name="a65b68b1144a2234bfd8b0bc1b0159671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b68b1144a2234bfd8b0bc1b0159671">&#9670;&#160;</a></span>ReportSlippageFunc_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* Cpl::System::PeriodicScheduler::ReportSlippageFunc_T) (<a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> &amp;intervalThatSlipped, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> currentTick, <a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a> missedInterval)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the method that is used to report to the Application when an Interval does not execute 'on time'. </p>
<p>Where: intervalThatSlipped - Reference to the interval that did not execute on time currentTick - The system time when the scheduler executed the interval missedInterval - The interval boundary that was missed intervalContext - Application defined argument/value that was passed to the interval method. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2716338691bc9e0a9df667add7dbecd3" name="a2716338691bc9e0a9df667add7dbecd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2716338691bc9e0a9df667add7dbecd3">&#9670;&#160;</a></span>PeriodicScheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cpl::System::PeriodicScheduler::PeriodicScheduler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a></td>          <td class="paramname"><span class="paramname"><em>intervals</em>[], </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a></td>          <td class="paramname"><span class="paramname"><em>beginThreadProcessing</em><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a></td>          <td class="paramname"><span class="paramname"><em>endThreadProcessing</em><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a65b68b1144a2234bfd8b0bc1b0159671">ReportSlippageFunc_T</a></td>          <td class="paramname"><span class="paramname"><em>slippageFunc</em><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a412dc9cfb5083bd699d3b300c4597a87">NowFunc_T</a></td>          <td class="paramname"><span class="paramname"><em>nowFunc</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="class_cpl_1_1_system_1_1_elapsed_time.html#aae92d5e018c980d170c3a34e261e88ac">ElapsedTime::precision</a></span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>The application provides a variable length array of interval definitions that will be scheduled. The last entry in the array must contain a 'null' <a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html" title="Defines an interval.">Interval_T</a> definition (i.e. all fields set to zero). The Scheduler assumes that each <a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html" title="Defines an interval.">Interval_T</a> definition has a unique period time.</p>
<p>The individual 'intervals' MUST be initialized (either statically or by calling initializeInterval()) before creating the scheduler.</p>
<p>Notes:</p><ul>
<li>When extending a event based (i.e. inherits from <a class="el" href="class_cpl_1_1_system_1_1_event_loop.html" title="This concrete class is a Runnable object that provides a event driven execution model for a thread.">EventLoop</a>) runnable object with scheduling, the Application should define all of the scheduled Intervals to have period times that are multiples of the <a class="el" href="class_cpl_1_1_system_1_1_event_loop.html" title="This concrete class is a Runnable object that provides a event driven execution model for a thread.">EventLoop</a>'s 'timeOutPeriodInMsec' constructor value. </li>
</ul>

</div>
</div>
<a id="ad34c482b4f3bcde8332639a33066e96e" name="ad34c482b4f3bcde8332639a33066e96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34c482b4f3bcde8332639a33066e96e">&#9670;&#160;</a></span>~PeriodicScheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual Cpl::System::PeriodicScheduler::~PeriodicScheduler </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Virtual destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac44ae872eb166a3ae3f167eb410e65f4" name="ac44ae872eb166a3ae3f167eb410e65f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44ae872eb166a3ae3f167eb410e65f4">&#9670;&#160;</a></span>beginLoop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Cpl::System::PeriodicScheduler::beginLoop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is expected to be called ONCE when the 'thread' is started and prior to the thread entering its 'forever' loop. </p>

</div>
</div>
<a id="a7e7045822721b64968a80abea9d6f6ba" name="a7e7045822721b64968a80abea9d6f6ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e7045822721b64968a80abea9d6f6ba">&#9670;&#160;</a></span>endLoop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Cpl::System::PeriodicScheduler::endLoop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is expected to be called ONCE when the 'thread' has exited its 'forever' loop (but before the thread has actually terminated) </p>

</div>
</div>
<a id="acff10bb979868b13f6ac1875a309719c" name="acff10bb979868b13f6ac1875a309719c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acff10bb979868b13f6ac1875a309719c">&#9670;&#160;</a></span>executeScheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool Cpl::System::PeriodicScheduler::executeScheduler </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to invoke the scheduler. </p>
<p>When called zero or more Interval definitions will be executed. The method returns true if at least one Interval was executed.</p>
<p>If a scheduled Interval does not execute 'on time', then the reportSlippage() method will called. It is the Application's to decide (what if anything) is done when there is slippage in the scheduling. The slippage is reported AFTER the Interval's IntervalCallbackFunc_T is called. </p>

</div>
</div>
<a id="a5eb7f1cbe2dcac2de27e20e4b9265d78" name="a5eb7f1cbe2dcac2de27e20e4b9265d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb7f1cbe2dcac2de27e20e4b9265d78">&#9670;&#160;</a></span>setTimeMarker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cpl::System::PeriodicScheduler::setTimeMarker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>interval</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_cpl_1_1_system_1_1_elapsed_time_1_1_precision___t.html">ElapsedTime::Precision_T</a></td>          <td class="paramname"><span class="paramname"><em>currentTick</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper method to Round DOWN to the nearest 'interval' boundary. </p>
<p>A side effect the rounding-down is the FIRST execution of an interval will NOT be accurate (i.e. will be something less than 'periodMs'). </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="adb3ed5eb956ea94ce77e8a97f85cc8e6" name="adb3ed5eb956ea94ce77e8a97f85cc8e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb3ed5eb956ea94ce77e8a97f85cc8e6">&#9670;&#160;</a></span>m_beginThreadFunc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a> Cpl::System::PeriodicScheduler::m_beginThreadFunc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Application hook during thread start-up. </p>

</div>
</div>
<a id="a48405b1375c3b4d78a839b0149791e64" name="a48405b1375c3b4d78a839b0149791e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48405b1375c3b4d78a839b0149791e64">&#9670;&#160;</a></span>m_endThreadFunc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a7716e93ce04eeba0093290e14165c76a">Hook_T</a> Cpl::System::PeriodicScheduler::m_endThreadFunc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Application hook during thread shutdown. </p>

</div>
</div>
<a id="afcbe85069d8ca86ee96fe6a16d0523d6" name="afcbe85069d8ca86ee96fe6a16d0523d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcbe85069d8ca86ee96fe6a16d0523d6">&#9670;&#160;</a></span>m_firstExecution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Cpl::System::PeriodicScheduler::m_firstExecution</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag to managing the 'first' execution. </p>

</div>
</div>
<a id="a6c0362abf820011bb43143303f11fa63" name="a6c0362abf820011bb43143303f11fa63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0362abf820011bb43143303f11fa63">&#9670;&#160;</a></span>m_intervals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_cpl_1_1_system_1_1_periodic_scheduler_1_1_interval___t.html">Interval_T</a>* Cpl::System::PeriodicScheduler::m_intervals</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of Intervals Pointers. </p>

</div>
</div>
<a id="ae2f5f6f912a64614cb21a442098f32a1" name="ae2f5f6f912a64614cb21a442098f32a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f5f6f912a64614cb21a442098f32a1">&#9670;&#160;</a></span>m_nowFunc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a412dc9cfb5083bd699d3b300c4597a87">NowFunc_T</a> Cpl::System::PeriodicScheduler::m_nowFunc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current system callback. </p>

</div>
</div>
<a id="a3a23b70a23c9d3f5d5c1accb5e633848" name="a3a23b70a23c9d3f5d5c1accb5e633848"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a23b70a23c9d3f5d5c1accb5e633848">&#9670;&#160;</a></span>m_reportSlippage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a65b68b1144a2234bfd8b0bc1b0159671">ReportSlippageFunc_T</a> Cpl::System::PeriodicScheduler::m_reportSlippage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Report slippage method. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Cpl/System/<a class="el" href="_system_2_periodic_scheduler_8h_source.html">PeriodicScheduler.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 25 2024 23:55:51 for Patterns in the Machine by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
